package lv.ctco.javaschool.game.entity;

import lombok.Data;
import lv.ctco.javaschool.auth.entity.domain.User;

import javax.persistence.*;

@Data
@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = {"game_id", "user_id", "is_target_area", "address"}))
public class Cell {
    @Id
    @GeneratedValue
    private Long id;

    @ManyToOne
    @JoinColumn(name = "game_id")
    private Game game;

    @ManyToOne
    @JoinColumn(name = "user_id")
    private User user;

    @Column(name = "is_target_area")
    private boolean targetArea;

    private String address;

    private CellState state;

    public CellStateDto getCellStateDto(Cell cell) {
        CellStateDto dto = new CellStateDto();
        dto.setAddress( cell.getAddress() );
        dto.setState( cell.getState() );
        dto.setTargetArea( cell.isTargetArea() );
        return dto;
    }
}
